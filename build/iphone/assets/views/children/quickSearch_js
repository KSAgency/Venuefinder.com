function quickSearch(e,t){var i=Ti.UI.createView({width:"100%",height:"100%"}),a=[],n=require("/builders/databaseFunctions/createDatabase"),r=n("/venuefinder.db","venuefinder"),o=r.execute("SELECT * FROM Venue"),s=o.rowCount.toString(),l=s.substr(0,2),d=s.substr(2,12),c=Titanium.UI.createButton({title:"Search"});"Android"!=Ti.App.Properties.getString("osname")&&t.setRightNavButton(c);var u=Titanium.UI.createView({height:50}),f=Titanium.UI.createLabel({text:"Search our "+l+","+d+" UK & International venues",color:"#666",textAlign:"center",font:{fontFamily:"Arial",fontSize:"14"}});if(u.add(f),"iPad"==Ti.App.Properties.getString("osname")){var p=Titanium.UI.createImageView({image:"/images/imageBannerRight.png",height:"360",top:"50",right:"0",zIndex:"2"});i.add(p);var m=Titanium.UI.createImageView({image:"/images/imageBannerLeft.png",height:"360",top:"50",left:"0",zIndex:"2"});i.add(m)}var g=require("/builders/databaseFunctions/createCountryCountyList"),h=g(e,null,null,null,null),v=require("/builders/databaseFunctions/createDoubleField"),b=v("Venue Name","Example Venue"),T=v("Venue Town","Example Town"),I=v("Meeting Capacity","250","60%",!0),w=v("Catering Capacity (Max)","250","60%",!0),y=v("No. of Meeting Rooms","5","60%",!0),x=v("No. of Bedrooms","20","60%",!0);a.push(h[0]),a.push(b[0]),a.push(T[0]),a.push(h[1]),a.push(I[0]),a.push(w[0]),a.push(y[0]),a.push(x[0]);var E=require("/builders/submitButtonStyle"),S=E();c.addEventListener("click",function(){S.fireEvent("click")}),S.addEventListener("click",function(){var t=require("/builders/startActInd"),a=t(i);i.setTouchEnabled(!1);var n=b[1].getValue(),r=T[1].getValue(),o=I[1].getValue(),s=w[1].getValue(),l=y[1].getValue(),d=x[1].getValue(),c="",u="",f="SELECT * FROM Venue JOIN VenueCoords ON Venue.VenueID=VenueCoords.VenueID WHERE VenueCoords.Latitude IS NOT NULL",p="",m="",g="",v="",E="",S=null;if("Choose a Country"!=h[0].title&&"United Kingdom"!=h[0].title)var c=' AND Country="'+h[0].title+'"',S=!0;if("United Kingdom"==h[0].title)var c=' AND (Country="United Kingdom" OR Country="England" OR Country="Scotland" OR Country="Wales" OR Country="Northern Ireland" OR Country="Channel Islands" OR Country="Isle of Man")',S=!0;if("Choose a County"!=h[1].title)var u=' AND County="'+h[1].title+'"',S=!0;if(""!=n)var f='SELECT * FROM Venue WHERE VenueSort LIKE "%'+n+'%"',S=!0;if(""!=r)var p=' AND Town LIKE "%'+r+'%"',S=!0;if(""!=o)var m=' AND MaxMeetingCapacity >="'+o+'"',S=!0;if(""!=s)var g=' AND MaxCateringCapacity >="'+s+'"',S=!0;if(""!=l)var v=' AND MeetingRoomsNo >="'+l+'"',S=!0;if(""!=d)var E=' AND BedroomsNo >="'+d+'"',S=!0;var A=f+c+u+p+m+g+v+E,_=require("/builders/createResultsPage"),L=_(i,e,A,S,null,null,!0,!1);e.activeTab.open(L);{var F=require("/builders/endActInd");F(i,a[0],a[1])}i.setTouchEnabled(!0)});var A=Titanium.UI.createTableView({headerView:u,data:a,backgroundColor:"#d2e8f5",height:"89.5%",top:"0",footerView:S});"iPad"!=Ti.App.Properties.getString("osname")&&A.setWidth(300),"Android"!=Ti.App.Properties.getString("osname")&&A.setStyle(Titanium.UI.iPhone.TableViewStyle.GROUPED),"iPad"==Ti.App.Properties.getString("osname")&&(A.setWidth(600),A.setHeight("100%"),A.setScrollable(!1),A.setLayout("horizontal"),A.setHorizontalWrap(!0)),i.add(A);var _=require("/builders/createAdvert"),L=_();return i.add(L),i}module.exports=quickSearch;