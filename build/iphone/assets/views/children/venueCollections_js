function venueCollections(e){function t(t,i,a){var o=require("/builders/createApplicationWindow"),s=o(e,null,"Venue Collections","#d2e8f5",null,null,null,null);e.activeTab.open(s),s.addEventListener("close",function(){r=[]});var l=Titanium.UI.createView({width:Ti.UI.FILL,height:Ti.UI.SIZE,layout:"vertical"}),d=Titanium.UI.createImageView({image:a,width:Ti.UI.FILL,height:55,touchEnabled:!1,top:0});"iPad"==Ti.App.Properties.getString("osname")&&(d.setWidth(600),d.setHeight(null)),l.add(d);var u=Ti.UI.createView({height:10,top:0,width:Ti.UI.FILL});l.add(u);var c='SELECT COUNT(Country) AS VenueCount FROM Venue JOIN VenueToVenueStyles ON Venue.VenueID=VenueToVenueStyles.VenueID WHERE (Country="England" OR Country="Wales" OR Country="Scotland" OR Country="Northern Ireland" OR Country="Channel Islands" OR Country="Isle of Man") AND PackageCode!="FRE" AND VenueStyleID="'+t+'" AND Country IS NOT NULL AND LTRIM (Country)!=""',f='SELECT DISTINCT Country, COUNT(Country) AS VenueCount FROM Venue JOIN VenueToVenueStyles ON Venue.VenueID=VenueToVenueStyles.VenueID WHERE PackageCode!="FRE" AND VenueStyleID="'+t+'" AND Country IS NOT NULL AND LTRIM (Country)!="" GROUP BY Country',p='SELECT Venue.County, COUNT(County) AS VenueCount FROM Venue JOIN VenueToVenueStyles ON Venue.VenueID=VenueToVenueStyles.VenueID WHERE PackageCode!="FRE" AND (',m=') AND County IS NOT NULL AND LTRIM(County)!="" AND VenueStyleID="'+t+'" GROUP BY County ORDER BY County ASC',g=require("/builders/databaseFunctions/createCountryCountyList"),h=g(e,c,f,p,m),v=require("/builders/databaseFunctions/createDoubleField"),T=v("Venue Town","Example Town");r.push(h[0]),r.push(h[1]),r.push(T[0]);var b=require("/builders/submitButtonStyle"),I=b();I.addEventListener("click",function(){var i=require("/builders/startActInd"),a=i(s),r=T[1].getValue(),o="",l="";if("Choose a Country"!=h[0].title&&"United Kingdom"!=h[0].title)var o=' AND Country="'+h[0].title+'"',d=!0;if("United Kingdom"==h[0].title)var o=' AND (Country="United Kingdom" OR Country="England" OR Country="Scotland" OR Country="Wales" OR Country="Northern Ireland" OR Country="Channel Islands" OR Country="Isle of Man")',d=!0;if("Choose a County"!=h[1].title)var l=' AND County="'+h[1].title+'"',d=!0;if(""!=r)var u=' AND Town LIKE "%'+r+'%"',d=!0;else var u="";var c=o+l+u,f='SELECT * FROM VenueToVenueStyles JOIN Venue ON VenueToVenueStyles.VenueID=Venue.VenueID WHERE PackageCode!="FRE" AND VenueStyleID="'+t+'"'+c,p=require("/builders/createResultsPage"),m=p(n,e,f,d,a[0],a[1],!1,!1);e.activeTab.open(m);{var g=require("/builders/endActInd");g(s,a[0],a[1])}});var w=Titanium.UI.createTableView({data:r,backgroundColor:"#d2e8f5",top:0,headerView:l,footerView:I});"iPad"!=Ti.App.Properties.getString("osname")&&w.setWidth(300),"iPad"==Ti.App.Properties.getString("osname")&&w.setWidth(600),"Android"!=Ti.App.Properties.getString("osname")&&w.setStyle(Titanium.UI.iPhone.TableViewStyle.GROUPED),s.add(w)}function i(){var t=require("/builders/startActInd"),i=t(n),a='SELECT DISTINCT VenueAdvertOptionsForWeb.VenueID, Venue.* FROM VenueAdvertOptionsForWeb JOIN Venue ON VenueAdvertOptionsForWeb.VenueID == Venue.VenueID WHERE VenueAdvertOptionsForWeb.OptionCode="VID" AND VenueAdvertOptionsForWeb.URL IS NOT NULL AND VenueAdvertOptionsForWeb.URL!=""',r=require("/builders/createResultsPage"),o=r(n,e,a,!0,null,null,!1,!1,"Search","Venue Collections","Venue Videos",null,"/images/videobanner.png");e.activeTab.open(o);{var s=require("/builders/endActInd");s(n,i[0],i[1])}}function a(t,i){var a=require("/builders/createApplicationWindow"),r=a(e,null,"Venue Collections","#d2e8f5",null,null,null,null);e.activeTab.open(r);var o=[],s=Titanium.UI.createView({width:Ti.UI.FILL,height:Ti.UI.SIZE,layout:"vertical"}),l=Titanium.UI.createImageView({image:i,width:Ti.UI.FILL,height:55,touchEnabled:!1,top:0});s.add(l),"iPad"==Ti.App.Properties.getString("osname")&&(l.setWidth("600"),l.setHeight(null));var d=Ti.UI.createView({height:10,top:0,width:Ti.UI.FILL});s.add(d);var u=require("/builders/todaysDate"),c=u(),f='SELECT COUNT(Country) AS VenueCount FROM Venue JOIN Offers ON Venue.VenueID=Offers.EntryID WHERE (Country="England" OR Country="Wales" OR Country="Scotland" OR Country="Northern Ireland" OR Country="Channel Islands" OR Country="Isle of Man") AND Country IS NOT NULL AND LTRIM(Country)!="" AND Offers.ValidToDate>="'+c+'" ORDER BY Country ASC',p='SELECT Venue.Country, COUNT(Country) AS VenueCount FROM Venue JOIN Offers ON Venue.VenueID=Offers.EntryID WHERE Country IS NOT NULL AND LTRIM(Country)!="" AND Offers.ValidToDate>="'+c+'" GROUP BY Country ORDER BY Country ASC',m="SELECT Venue.County, COUNT(County) AS VenueCount FROM Venue JOIN Offers ON Venue.VenueID=Offers.EntryID WHERE (",g=') AND County IS NOT NULL AND LTRIM(County)!="" AND validToDate>="'+c+'" AND Venue.PackageCode!="FRE" GROUP BY County ORDER BY County ASC',h=require("/builders/databaseFunctions/createCountryCountyList"),v=h(e,f,p,m,g),T=require("/builders/databaseFunctions/createDoubleField"),b=require("/builders/databaseFunctions/createCheckField"),I=T("Venue Town","Example Town"),w=b("Christmas Offers"),y=b("Wedding Offers");o.push(v[0]),o.push(v[1]),o.push(I[0]),o.push(w[0]),o.push(y[0]);var E=require("/builders/submitButtonStyle"),S=E();S.addEventListener("click",function(){var t=require("/builders/startActInd"),i=t(r),a=I[1].getValue(),o='SELECT * FROM Venue JOIN Offers ON Venue.VenueID=Offers.EntryID WHERE EntryID IS NOT NULL AND validToDate>="'+c+'"',s="",l="",d="",u="",f="";if(1==y[0].checkValue){var p=!0;isWedOff="1";var u=' AND WeddingOffer="'+y[0].checkValue+'"'}if(1==w[0].checkValue){var p=!0;isXmasOff="1";var f=' AND ChristmasOffer="'+w[0].checkValue+'"'}if("Choose a Country"!=v[0].title&&"United Kingdom"!=v[0].title)var s=' AND Country="'+v[0].title+'"',p=!0;if("United Kingdom"==v[0].title)var s=' AND (Country="United Kingdom" OR Country="England" OR Country="Scotland" OR Country="Wales" OR Country="Northern Ireland" OR Country="Channel Islands" OR Country="Isle of Man")',p=!0;if("Choose a County"!=v[1].title)var l=' AND County="'+v[1].title+'"',p=!0;if(""!=a)var d=' AND Town LIKE "%'+a+'%"',p=!0;var m=o+s+l+d+u+f,g=require("/builders/createResultsPage"),h=g(n,e,m,p,null,null,!1,!0);e.activeTab.open(h);{var T=require("/builders/endActInd");T(r,i[0],i[1])}});var x=Titanium.UI.createTableView({data:o,backgroundColor:"#d2e8f5",headerView:s,footerView:S,top:0});"iPad"!=Ti.App.Properties.getString("osname")&&x.setWidth(300),"iPad"==Ti.App.Properties.getString("osname")&&x.setWidth(600),"Android"!=Ti.App.Properties.getString("osname")&&x.setStyle(Titanium.UI.iPhone.TableViewStyle.GROUPED),r.add(x)}var n=Ti.UI.createView({width:Ti.UI.FILL,height:Ti.UI.FILL,backgroundColor:"#d2e8f5"}),r=[],o=Titanium.UI.createScrollView({contentWidth:"auto",contentHeight:"auto",layout:"vertical",height:"98%",top:"0%",backgroundColor:"#FFFFFF"});"iPad"==Ti.App.Properties.getString("osname")&&o.setBackgroundColor("#d2e8f5");var s=Titanium.UI.createImageView({image:"/images/col-4starhotels.jpg",width:320,height:55,venueStyle:"39",styleName:"4 & 5 Star Hotels"});o.add(s);var l=Titanium.UI.createImageView({image:"/images/col-conference.jpg",width:320,height:55,venueStyle:"3",styleName:"Conference Centre Venues"});o.add(l);var d=Titanium.UI.createImageView({image:"/images/col-unusual.jpg",width:320,height:55,venueStyle:"15",styleName:"Unusual Venues"});o.add(d);var u=Titanium.UI.createImageView({image:"/images/col-venueoffers.jpg",width:320,height:55,venueStyle:"",styleName:"Venue Offers"});o.add(u);var c=Titanium.UI.createImageView({image:"/images/col-virtualtours.jpg",width:320,height:55,styleName:"Venue Videos"});o.add(c);var f=Titanium.UI.createImageView({image:"/images/col-weddings.jpg",width:320,height:55,venueStyle:"34",styleName:"Wedding Venues"});o.add(f),"iPad"==Ti.App.Properties.getString("osname")&&(s.setWidth("600"),s.setHeight("95"),l.setWidth("600"),l.setHeight("95"),d.setWidth("600"),d.setHeight("95"),u.setWidth("600"),u.setHeight("95"),c.setWidth("600"),c.setHeight("95"),f.setWidth("600"),f.setHeight("95")),n.add(o),s.addEventListener("click",function(){var e=require("/builders/startActInd"),i=e(n);n.setTouchEnabled(!1);var a=s.venueStyle,r=s.styleName,o=s.getImage();t(a,r,o);{var l=require("/builders/endActInd");l(n,i[0],i[1])}n.setTouchEnabled(!0)}),l.addEventListener("click",function(){var e=require("/builders/startActInd"),i=e(n);n.setTouchEnabled(!1);var a=l.venueStyle,r=l.styleName,o=l.getImage();t(a,r,o);{var s=require("/builders/endActInd");s(n,i[0],i[1])}n.setTouchEnabled(!0)}),d.addEventListener("click",function(){var e=require("/builders/startActInd"),i=e(n);n.setTouchEnabled(!1);var a=d.venueStyle,r=d.styleName,o=d.getImage();t(a,r,o);{var s=require("/builders/endActInd");s(n,i[0],i[1])}n.setTouchEnabled(!0)}),u.addEventListener("click",function(){var e=require("/builders/startActInd"),t=e(n);n.setTouchEnabled(!1);var i=u.styleName,r=u.getImage();a(i,r);{var o=require("/builders/endActInd");o(n,t[0],t[1])}n.setTouchEnabled(!0)}),c.addEventListener("click",function(){var e=require("/builders/startActInd"),t=e(n);n.setTouchEnabled(!1);{var a=c.styleName,r=c.getImage(),o=require("/builders/endActInd");o(n,t[0],t[1])}n.setTouchEnabled(!0),i(a,r)}),f.addEventListener("click",function(){var e=require("/builders/startActInd"),i=e(n);n.setTouchEnabled(!1);var a=f.venueStyle,r=f.styleName,o=f.getImage();t(a,r,o);{var s=require("/builders/endActInd");s(n,i[0],i[1])}n.setTouchEnabled(!0)});var p=require("/builders/createAdvert"),m=p(!0);return n.add(m),n}module.exports=venueCollections;