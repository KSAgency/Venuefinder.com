function venuesatoz(e,t,i,a){for(var n=(Ti.UI.createScrollView({showVerticalScrollIndicator:!0,contentHeight:"auto",contentWidth:"694",height:"576",width:"938",top:"125",left:"43",horizontalBounce:!1,verticalBounce:!0,layout:"horizontal",zIndex:101,visible:!1}),require("/builders/databaseFunctions/createDatabase")),r=n("/venuefinder.db","venuefinder"),o=[],s=r.execute("SELECT * FROM Venue WHERE VenueID in (select venueid from venuetovenuestyles where venuestyleid = "+t+') AND  PackageCode in ("GLD","SIL","BRZ") ORDER BY venuesort ASC');s.isValidRow();){if(void 0!=s.fieldByName("VenueName")){var l=[];l.venueID=s.fieldByName("VenueID"),l.venueName=s.fieldByName("VenueName"),l.venueTown=s.fieldByName("Town"),l.bedroomsNo=s.fieldByName("BedroomsNo"),l.postCode=s.fieldByName("Postcode"),l.meetingRoomsNo=s.fieldByName("MeetingRoomsNo"),l.packageCode=s.fieldByName("PackageCode");var d=r.execute('SELECT * FROM VenueAdvertOptionsForWeb WHERE VenueID="'+l.venueID+'" AND (OptionCode="TOP" OR OptionCode="PIC")'),u="";d.isValidRow()&&(u=d.fieldByName("GraphicFileName")),l.imageUrl=u;var c="";""!=l.venueTown?c=""!=l.postCode?l.venueTown+", "+l.postCode:l.venueTown:""!=l.postCode&&(c=l.postCode),l.location=c,o.push(l)}s.next()}r.close();var f=require("/views/collview/getVenueThumbView"),p=[],m=o.length;if(0!=m)for(var g=Math.ceil(m/4),h=0,v=0,T=11,b=84,I=0;g>I;I++){var w=Titanium.UI.createTableViewRow({height:195,selectionStyle:"none",backgroundColor:"rgba(255,255,255,0)",zIndex:101,top:"0"});p.push(w);for(var y=80,E=0;4>E;E++){var S=o[h];if(void 0!=S&&void 0!=S.venueName){2==E&&(y=y+b-T);var A=0;if("BRZ"==S.packageCode)for(var C=h+1;C<o.length;C++)if(void 0!=o[C].packageCode&&"BRZ"==o[C].packageCode){A=o[C].venueID;break}var L=f.getVenueThumb(o[h],v,y,a,A,!1);w.add(L),y=y+168+T}h++}}var x=Ti.UI.createView({backgroundColor:"rgba(255,255,255,0)",top:"125",width:"938",height:"576",zIndex:101,visible:!1}),V=Ti.UI.createTableView({backgroundColor:"rgba(255,255,255,0)",data:p,width:Ti.UI.FILL,height:Ti.UI.FILL,separatorStyle:Titanium.UI.iPhone.TableViewSeparatorStyle.NONE,separatorColor:"transparent"});return x.add(V),[x]}module.exports=venuesatoz;