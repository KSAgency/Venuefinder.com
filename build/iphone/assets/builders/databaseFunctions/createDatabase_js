<<<<<<< HEAD
function createDatabase(e,t,i){if("Android"!=Ti.App.Properties.getString("osname")){var a=Ti.Filesystem.applicationDataDirectory;a=a.replace("Documents","Library/Private%20Documents");var n=Ti.Filesystem.getFile(a,t+".sql")}else var a="/data/data/"+Ti.App.getID()+"/databases/",n=Ti.Filesystem.getFile(a,t);if(n.exists())var o=Ti.Database.open(t);else var o=Ti.Database.install(e,t);if(("venuefinder.db"==e&&"iPhone"==Ti.App.Properties.getString("osname")||"iPad"==Ti.App.Properties.getString("osname"))&&(o.file.remoteBackup=!1),"/venuefinder.db"==e){var r="/data/data/"+Ti.App.getID()+"/databases/specialoffers";if("Android"!=Ti.App.Properties.getString("osname")){var l=Ti.Filesystem.tempDirectory;l.toString(),r=l+"specialoffers.db"}if(1==i){var d=Ti.Database.install(e,t);Ti.API.info('ATTACH DATABASE "'+r+'" AS "OffersDB"'),Ti.API.info(r),d.execute("DROP TABLE IF EXISTS Offers"),d.execute('ATTACH DATABASE "'+r+'" AS "OffersDB"'),d.execute("CREATE TABLE IF NOT EXISTS Offers AS SELECT * FROM OffersDB.Offers"),d.close();var s=Titanium.Filesystem.getFile(Titanium.Filesystem.tempDirectory,"/"+e+".zip"),u=Titanium.Filesystem.getFile(Titanium.Filesystem.tempDirectory,"/"+e+".db");s.deleteFile(),u.deleteFile()}var c=o.execute('SELECT sql FROM sqlite_master WHERE tbl_name = "Venue" AND sql LIKE "%PackageOrder%"'),f=c.rowCount;0==f&&(o.execute('ALTER TABLE "Venue" ADD "PackageOrder" INTEGER DEFAULT "0";'),o.execute('UPDATE Venue SET PackageOrder="1" WHERE PackageCode="FRE"'))}return o}module.exports=createDatabase;
=======
function createDatabase(e,t,i){if("Android"!=Ti.App.Properties.getString("osname")){var a=Ti.Filesystem.applicationDataDirectory;a=a.replace("Documents","Library/Private%20Documents");var n=Ti.Filesystem.getFile(a,t+".sql")}else var a="/data/data/"+Ti.App.getID()+"/databases/",n=Ti.Filesystem.getFile(a,t);if(n.exists())var o=Ti.Database.open(t);else var o=Ti.Database.install(e,t);if(("venuefinder.db"==e&&"iPhone"==Ti.App.Properties.getString("osname")||"iPad"==Ti.App.Properties.getString("osname"))&&(o.file.remoteBackup=!1),"/venuefinder.db"==e){var r="/data/data/"+Ti.App.getID()+"/databases/specialoffers";if("Android"!=Ti.App.Properties.getString("osname")){var l=Ti.Filesystem.tempDirectory;l.toString(),r=l+"specialoffers.db"}if(1==i){var d=Ti.Database.install(e,t);d.execute("DROP TABLE IF EXISTS Offers"),d.execute('ATTACH DATABASE "'+r+'" AS "OffersDB"'),d.execute("CREATE TABLE IF NOT EXISTS Offers AS SELECT * FROM OffersDB.Offers"),d.close();var s=Titanium.Filesystem.getFile(Titanium.Filesystem.tempDirectory,"/"+e+".zip"),u=Titanium.Filesystem.getFile(Titanium.Filesystem.tempDirectory,"/"+e+".db");s.deleteFile(),u.deleteFile()}var c=o.execute('SELECT sql FROM sqlite_master WHERE tbl_name = "Venue" AND sql LIKE "%PackageOrder%"'),f=c.rowCount;0==f&&(o.execute('ALTER TABLE "Venue" ADD "PackageOrder" INTEGER DEFAULT "0";'),o.execute('UPDATE Venue SET PackageOrder="1" WHERE PackageCode="FRE"'))}return o}module.exports=createDatabase;
>>>>>>> FETCH_HEAD
