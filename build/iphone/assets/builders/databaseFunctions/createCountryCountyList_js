function createCountryCountyList(e,t,i,a,o){var n=Titanium.UI.createTableViewRow({title:"Choose a Country",color:"#399ad4",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:"14",fontWeight:"bold"},hasChild:!0,height:"45"});n.addEventListener("click",function(){var a=require("/builders/createApplicationWindow"),o=a(e,null,"Choose a Country","#FFF",null,null,null,null),l=require("/builders/startActInd"),d=l(o);"Android"!=Ti.App.Properties.getString("osname")&&o.setBackgroundColor("#d2e8f5"),e.activeTab.open(o);var s=require("/builders/databaseFunctions/createDatabase"),u=s("/venuefinder.db","venuefinder"),c=[],f=Titanium.UI.createTableViewRow({backgroundColor:"#f7f7f7",height:"45",title:"Clear",font:{fontFamily:"Arial",fontSize:"14",fontWeight:"Bold"},color:"#399ad4",action:"Clear"});if(c.push(f),null==t||'SELECT * FROM Venue WHERE (Country="England" OR Country="Wales" OR Country="Scotland" OR Country="Northern Ireland" OR Country="Channel Islands" OR Country="Isle of Man")'==t){t='SELECT * FROM Venue WHERE (Country="England" OR Country="Wales" OR Country="Scotland" OR Country="Northern Ireland" OR Country="Channel Islands" OR Country="Isle of Man")';var m=u.execute(t),g=m.rowCount}else var m=u.execute(t),g=m.fieldByName("VenueCount");var h=Titanium.UI.createTableViewRow({backgroundColor:"#f7f7f7",height:"45",action:"United Kingdom"}),T=Titanium.UI.createLabel({text:"United Kingdom",font:{fontFamily:"Arial",fontSize:"14",fontWeight:"Bold"},color:"#399ad4",left:5}),p=Titanium.UI.createLabel({text:" ("+g+")",right:5,font:{fontFamily:"Arial",fontSize:"14"},color:"#399ad4"});"Android"!=Ti.App.Properties.getString("osname")&&(T.setLeft(15),p.setRight(15)),h.add(T),h.add(p),c.push(h),(null==i||""==i)&&(i='SELECT DISTINCT Country, COUNT(Country) AS VenueCount FROM Venue WHERE Country IS NOT NULL AND LTRIM (Country)!="" GROUP BY Country');for(var I=u.execute(i);I.isValidRow();){var v=I.fieldByName("Country"),b=I.fieldByName("VenueCount"),f=Titanium.UI.createTableViewRow({backgroundColor:"#f7f7f7",height:45,action:v}),S=Titanium.UI.createLabel({text:v,font:{fontFamily:"Arial",fontSize:"14",fontWeight:"Bold"},color:"#399ad4",left:5}),w=Titanium.UI.createLabel({text:" ("+b+")",right:5,font:{fontFamily:"Arial",fontSize:"14"},color:"#399ad4"});"Android"!=Ti.App.Properties.getString("osname")&&(S.setLeft(15),w.setRight(15)),f.add(S),f.add(w),"England"!=v&&"Wales"!=v&&"Scotland"!=v&&"Isle Of Man"!=v&&"Northern Ireland"!=v&&c.push(f),I.next()}I.close(),u.close();var y=Titanium.UI.createTableView({data:c,backgroundColor:"#d2e8f5"});if("Android"!=Ti.App.Properties.getString("osname")&&y.setStyle(Ti.UI.iPhone.TableViewStyle.GROUPED),"iPad"==Ti.App.Properties.getString("osname"))y.setWidth(600);else{var E=Ti.UI.createView({height:10,width:Ti.UI.FILL});y.setWidth(300),y.setHeaderView(E),y.setFooterView(E)}o.add(y),y.addEventListener("click",function(e){"Clear"==e.rowData.action?(n.setTitle("Choose a Country"),r.setTitle("Choose a County"),r.color="#666666",r.enabled=!1):(n.setTitle(e.rowData.action),r.color="#399ad4",r.enabled=!1,("United Kingdom"==e.rowData.action||"Republic of Ireland"==e.rowData.action)&&(r.color="#399ad4",r.enabled=!0)),o.close()});{var C=require("/builders/endActInd");C(o,d[0],d[1])}});var r=Titanium.UI.createTableViewRow({title:"Choose a County",color:"#666",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:"14",fontWeight:"Bold"},hasChild:!0,height:"45",enabled:!1});return r.addEventListener("click",function(){if(1==r.enabled){r.color="#399ad4";var t=require("/builders/createApplicationWindow"),i=t(e,null,"Choose a County","#FFF",null,null,null,null);"Android"!=Ti.App.Properties.getString("osname")&&i.setBackgroundColor("#d2e8f5");var l=require("/builders/startActInd"),d=l(i);e.activeTab.open(i);var s=require("/builders/databaseFunctions/createDatabase"),u=s("/venuefinder.db","venuefinder"),c=[],f=Titanium.UI.createTableViewRow({backgroundColor:"#f7f7f7",height:"45",title:"Clear",font:{fontFamily:"Arial",fontSize:"14",fontWeight:"Bold"},color:"#399ad4",action:"Clear"});if(c.push(f),"Republic of Ireland"==n.title)var m='Country == "Republic of Ireland"';else if("United Kingdom"==n.title)var m='Country == "Scotland" OR Country == "Wales" OR Country == "Channel Islands" OR Country == "England" OR Country == "Isle of Man" OR Country == "Northern Ireland"';(null==a||""==a)&&(a="SELECT County, COUNT(County) AS VenueCount FROM Venue WHERE ("),(null==o||""==o)&&(o=') AND County IS NOT NULL AND LTRIM(County)!="" GROUP BY County ORDER BY County ASC');var g=a+m+o;g=g.toString();for(var h=u.execute(g);h.isValidRow();){var T=h.fieldByName("County"),p=h.fieldByName("VenueCount");if(""!=T&&null!=T){var f=Titanium.UI.createTableViewRow({backgroundColor:"#f7f7f7",height:45,action:T}),I=Titanium.UI.createLabel({text:T,font:{fontFamily:"Arial",fontSize:"14",fontWeight:"Bold"},color:"#399ad4",left:5}),v=Titanium.UI.createLabel({text:" ("+p+")",right:5,font:{fontFamily:"Arial",fontSize:"14"},color:"#399ad4"});"Android"!=Ti.App.Properties.getString("osname")&&(I.setLeft(15),v.setRight(15)),f.add(I),f.add(v),c.push(f),h.next()}}u.close();var b=Titanium.UI.createTableView({data:c,backgroundColor:"#d2e8f5",width:300});if("Android"!=Ti.App.Properties.getString("osname")&&b.setStyle(Ti.UI.iPhone.TableViewStyle.GROUPED),"iPad"==Ti.App.Properties.getString("osname"))b.setWidth(600);else{var S=Ti.UI.createView({height:10,width:Ti.UI.FILL});b.setWidth(300),b.setHeaderView(S),b.setFooterView(S)}i.add(b),b.addEventListener("click",function(e){r.setTitle("Clear"==e.rowData.action?"Choose a County":e.rowData.action),i.close()});{var w=require("/builders/endActInd");w(i,d[0],d[1])}}else{r.color="#666";var y=Titanium.UI.createAlertDialog({title:"Error",message:"Sorry, counties are only available if the selected country is the United Kingdom or Republic of Ireland"});y.show()}}),[n,r]}module.exports=createCountryCountyList;