function createCountryCountyList(e,t,i,a,n){var o=Titanium.UI.createTableViewRow({title:"Choose a Country",color:"#399ad4",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:"14",fontWeight:"bold"},hasChild:!0,height:"45"});o.addEventListener("click",function(){var a=require("/builders/createApplicationWindow"),n=a(e,null,"Choose a Country","#FFF",null,null,null,null),l=require("/builders/startActInd"),d=l(n);n.setBackgroundColor("#d2e8f5"),e.activeTab.open(n);var u=require("/builders/databaseFunctions/createDatabase"),s=u("/venuefinder.db","venuefinder"),c=[],f=Titanium.UI.createTableViewRow({backgroundColor:"#f7f7f7",height:"45",title:"Clear",font:{fontFamily:"Arial",fontSize:"14",fontWeight:"Bold"},color:"#399ad4",action:"Clear"});if(c.push(f),null==t||'SELECT * FROM Venue WHERE (Country="England" OR Country="Wales" OR Country="Scotland" OR Country="Northern Ireland" OR Country="Channel Islands" OR Country="Isle of Man")'==t){t='SELECT * FROM Venue WHERE (Country="England" OR Country="Wales" OR Country="Scotland" OR Country="Northern Ireland" OR Country="Channel Islands" OR Country="Isle of Man")';var m=s.execute(t),h=m.rowCount}else var m=s.execute(t),h=m.fieldByName("VenueCount");var g=Titanium.UI.createTableViewRow({backgroundColor:"#f7f7f7",height:"45",action:"United Kingdom"}),T=Titanium.UI.createLabel({text:"United Kingdom",font:{fontFamily:"Arial",fontSize:"14",fontWeight:"Bold"},color:"#399ad4",left:5}),p=Titanium.UI.createLabel({text:" ("+h+")",right:5,font:{fontFamily:"Arial",fontSize:"14"},color:"#399ad4"});"Android"!=Ti.App.Properties.getString("osname")&&(T.setLeft(15),p.setRight(15)),g.add(T),g.add(p),c.push(g),(null==i||""==i)&&(i='SELECT DISTINCT Country, COUNT(Country) AS VenueCount FROM Venue WHERE Country IS NOT NULL AND LTRIM (Country)!="" GROUP BY Country');for(var I=s.execute(i);I.isValidRow();){var v=I.fieldByName("Country"),b=I.fieldByName("VenueCount"),f=Titanium.UI.createTableViewRow({backgroundColor:"#f7f7f7",height:45,action:v}),w=Titanium.UI.createLabel({text:v,font:{fontFamily:"Arial",fontSize:"14",fontWeight:"Bold"},color:"#399ad4",left:5}),S=Titanium.UI.createLabel({text:" ("+b+")",right:5,font:{fontFamily:"Arial",fontSize:"14"},color:"#399ad4"});"Android"!=Ti.App.Properties.getString("osname")&&(w.setLeft(15),S.setRight(15)),f.add(w),f.add(S),"England"!=v&&"Wales"!=v&&"Scotland"!=v&&"Isle Of Man"!=v&&"Northern Ireland"!=v&&c.push(f),I.next()}I.close(),s.close();var C=Titanium.UI.createTableView({data:c,backgroundColor:"#d2e8f5"});if("Android"!=Ti.App.Properties.getString("osname")&&C.setStyle(Ti.UI.iPhone.TableViewStyle.GROUPED),"iPad"==Ti.App.Properties.getString("osname"))C.setWidth(600);else{var E=Ti.UI.createView({height:10,width:Ti.UI.FILL});C.setWidth(300),C.setHeaderView(E),C.setFooterView(E)}n.add(C),C.addEventListener("click",function(e){"Clear"==e.rowData.action?(o.setTitle("Choose a Country"),r.setTitle("Choose a County"),r.color="#666666",r.enabled=!1):(o.setTitle(e.rowData.action),r.color="#399ad4",r.enabled=!1,("United Kingdom"==e.rowData.action||"Republic of Ireland"==e.rowData.action)&&(r.color="#399ad4",r.enabled=!0)),n.close()});{var y=require("/builders/endActInd");y(n,d[0],d[1])}});var r=Titanium.UI.createTableViewRow({title:"Choose a County",color:"#666",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:"14",fontWeight:"Bold"},hasChild:!0,height:"45",enabled:!1});return r.addEventListener("click",function(){if(1==r.enabled){r.color="#399ad4";var t=require("/builders/createApplicationWindow"),i=t(e,null,"Choose a County","#FFF",null,null,null,null);"Android"!=Ti.App.Properties.getString("osname")&&i.setBackgroundColor("#d2e8f5");var l=require("/builders/startActInd"),d=l(i);e.activeTab.open(i);var u=require("/builders/databaseFunctions/createDatabase"),s=u("/venuefinder.db","venuefinder"),c=[],f=Titanium.UI.createTableViewRow({backgroundColor:"#f7f7f7",height:"45",title:"Clear",font:{fontFamily:"Arial",fontSize:"14",fontWeight:"Bold"},color:"#399ad4",action:"Clear"});if(c.push(f),"Republic of Ireland"==o.title)var m='Country == "Republic of Ireland"';else if("United Kingdom"==o.title)var m='Country == "Scotland" OR Country == "Wales" OR Country == "Channel Islands" OR Country == "England" OR Country == "Isle of Man" OR Country == "Northern Ireland"';(null==a||""==a)&&(a="SELECT County, COUNT(County) AS VenueCount FROM Venue WHERE ("),(null==n||""==n)&&(n=') AND County IS NOT NULL AND LTRIM(County)!="" GROUP BY County ORDER BY County ASC');var h=a+m+n;h=h.toString();for(var g=s.execute(h);g.isValidRow();){var T=g.fieldByName("County"),p=g.fieldByName("VenueCount");if(""!=T&&null!=T){var f=Titanium.UI.createTableViewRow({backgroundColor:"#f7f7f7",height:45,action:T}),I=Titanium.UI.createLabel({text:T,font:{fontFamily:"Arial",fontSize:"14",fontWeight:"Bold"},color:"#399ad4",left:5}),v=Titanium.UI.createLabel({text:" ("+p+")",right:5,font:{fontFamily:"Arial",fontSize:"14"},color:"#399ad4"});"Android"!=Ti.App.Properties.getString("osname")&&(I.setLeft(15),v.setRight(15)),f.add(I),f.add(v),c.push(f),g.next()}}s.close();var b=Titanium.UI.createTableView({data:c,backgroundColor:"#d2e8f5",width:300});if("Android"!=Ti.App.Properties.getString("osname")&&b.setStyle(Ti.UI.iPhone.TableViewStyle.GROUPED),"iPad"==Ti.App.Properties.getString("osname"))b.setWidth(600);else{var w=Ti.UI.createView({height:10,width:Ti.UI.FILL});b.setWidth(300),b.setHeaderView(w),b.setFooterView(w)}i.add(b),b.addEventListener("click",function(e){r.setTitle("Clear"==e.rowData.action?"Choose a County":e.rowData.action),i.close()});{var S=require("/builders/endActInd");S(i,d[0],d[1])}}else{r.color="#666";var C=Titanium.UI.createAlertDialog({title:"Error",message:"Sorry, counties are only available if the selected country is the United Kingdom or Republic of Ireland"});C.show()}}),[o,r]}module.exports=createCountryCountyList;