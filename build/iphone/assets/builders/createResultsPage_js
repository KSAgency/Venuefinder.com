function createResultsPage(e,t,i,a,o,n,r,l,d,s,u,c,f,m){function g(){var t=require("/builders/startActInd"),i=t(P);null!=e&&e.setTouchEnabled(!1),p+=v,I+=1,T(),"iPad"!=Ti.App.Properties.getString("osname")?L.setData(U):(L.removeAllChildren(),L.add(U));{var a=require("/builders/endActInd");a(P,i[0],i[1])}null!=e&&e.setTouchEnabled(!0)}function h(){var t=require("/builders/startActInd"),i=t(P);null!=e&&e.setTouchEnabled(!1),p-=v,I-=1,T(),"iPad"!=Ti.App.Properties.getString("osname")?L.setData(U):(L.removeAllChildren(),L.add(U));{var a=require("/builders/endActInd");a(P,i[0],i[1])}null!=e&&e.setTouchEnabled(!0)}function T(){U=[];for(var e=require("/builders/databaseFunctions/createDatabase"),a=e("/venuefinder.db","venuefinder"),o=a.execute(i+E+"ORDER BY PackageOrder ASC, VenueSort ASC LIMIT "+v+" OFFSET "+p);o.isValidRow();)!function(){var e=o.fieldByName("VenueID"),i=o.fieldByName("PackageCode"),n=o.fieldByName("VenueName"),r=o.fieldByName("Town"),m=o.fieldByName("Country");if(0!=r.length&&null!=r)var r=r+", ";else var r="";var g=(o.fieldByName("MeetingRoomDisabledAccess"),o.fieldByName("BedroomsNo")),h=o.fieldByName("BedroomDisabledAccess"),T=o.fieldByName("PackageCode");if(1==l){var p=o.fieldByName("summaryText"),I=(o.fieldByName("bodyText"),o.fieldByName("validFromDate"));validForm=I.toString(),I=I.substr(0,10),I=I.split("-");var v=I[0].toString(),b=I[1].toString()-1,S=I[2].toString();I=new Date(v,b,S),I=I.toString(),I=I.substr(0,15);var E=o.fieldByName("validToDate");E=E.toString(),E=E.substr(0,10),E=E.split("-");var w=E[0].toString(),A=E[1].toString()-1,y=E[2].toString();E=new Date(w,A,y),E=E.toString(),E=E.substr(0,15)}var L=null;if("PRE"==T){var F=a.execute('SELECT Text FROM VenueAdvertOptionsForWeb WHERE VenueID="'+e+'" AND OptionCode="SG2"');F.isValidRow()&&(L=F.fieldByName("Text"))}else{var F=a.execute('SELECT DescriptionText FROM VenueTextForWeb WHERE VenueID="'+e+'"');F.isValidRow()&&(L=F.fieldByName("DescriptionText"))}(null==L||""==L)&&(L="No description could be retrieved for this venue."),L.toString(),L=L.replace(/(<([^>]+)>)/gi,""),L=L.replace(/\s+/g," "),L=L.replace(/(&amp;)/g,"&"),L=L.replace(/(&nbsp;)/g," "),L=L.replace(/(&rsquo;)/g,"’"),L=L.replace(/(&hellip;)/g,"…"),L=L.replace(/(&oslash;)/g,"Ø"),L=L.replace(/(&pound;)/g,"£"),L=L.replace(/(&ndash;)/g,"–"),L=L.replace(/(&sup2;)/g,"²"),L=L.replace(/(&ldquo;)/g,"“"),L=L.replace(/(&rdquo;)/g,"”"),L=L.replace(/(&lsquo;)/g,"’");var N=a.execute('SELECT * FROM VenueAdvertOptionsForWeb WHERE VenueID="'+e+'" AND (OptionCode="TOP" OR OptionCode="PIC")');if(N.isValidRow())var V=N.fieldByName("GraphicFileName");if("FRE"==i)var R="freeResultsFormat";else var R="featuredResultsFormat";var k=[];if(1==l?(R="offersResultsFormat",k[0]=n,k[1]=e,k[2]=V,k[3]=r,k[4]=m,k[5]=p,k[6]=I,k[7]=E,k[8]=null):(k=[],k[0]=n,k[1]=e,k[2]=V,k[3]=g,k[4]=h,k[5]=L,k[6]=r,k[7]=m,k[8]=null==f?null:f),"FRE"==i){var C=require("/builders/"+R),O=C(n,e,r,m);U.push(O)}else{var C=require("/builders/"+R),O=C(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8]);U.push(O)}o.next(),O.addEventListener("click",function(e){var i=require("/builders/startActInd"),a=i(P);if("iPad"!=Ti.App.Properties.getString("osname"))var o=e.rowData;else var o=e.source;var n=null;"offersResultsFormat"==R?n="Offers":"Videos"==d&&(n="Media"),null==s?s=o.uniqueID:null!=s&&null==u?u=o.uniqueID:null!=s&&null!=u&&null==c&&(c=o.uniqueID);{var r=require("/builders/createApplicationWindow"),l=(r(t,"children/featuredListing",o.venueTitle,"#FFF",d,s,u,c,o.uniqueID,n),require("/builders/endActInd"));l(P,a[0],a[1])}})}();if("iPad"==Ti.App.Properties.getString("osname"))var n=Titanium.UI.createView({height:"60",width:"1000",left:"10",top:"10"}),r=Titanium.UI.createButton({title:"Next Page",color:"#999",borderRadius:10,borderColor:"#999",backgroundColor:"#FFF",height:50,width:327,right:0,top:0}),m=Titanium.UI.createButton({title:"Go Back",color:"#999",borderRadius:10,borderColor:"#999",backgroundColor:"#FFF",height:50,width:327,left:0,top:0});else{var n=Titanium.UI.createTableViewRow({height:70}),r=Titanium.UI.createButton({title:"Next Page",color:"#999",height:40,width:140,right:10}),m=Titanium.UI.createButton({title:"Go Back",color:"#999",height:40,width:140,left:10});"Android"==Ti.App.Properties.getString("osname")&&(r.setColor("#333"),m.setColor("#333"))}0!=I&&n.add(m),p+U.length<A&&n.add(r),U.push(n),r.addEventListener("click",function(){g(n)}),m.addEventListener("click",function(){h()}),a.close()}var p=0,I=0,v=10;"iPad"==Ti.App.Properties.getString("osname")&&(v=12),null!=m&&(v=m);var b=require("/builders/databaseFunctions/createDatabase"),S=b("/venuefinder.db","venuefinder");if(0==r)var E=' AND PackageCode!="FRE" ';else var E="";var w=S.execute(i+E),A=w.rowCount;if(S.close(),1==a&&0!=A){var U=[],y=require("/builders/createApplicationWindow"),P=y(t,null,"Search Results ("+A+")","#FFF","Search","Venue Search","Search Results",null);if(Ti.API.info(P),P.addEventListener("close",function(){p=0}),T(),"iPad"!=Ti.App.Properties.getString("osname"))var L=Titanium.UI.createTableView({data:U});else{var L=Titanium.UI.createScrollView({layout:"horizontal",horizontalWrap:!0,backgroundColor:"#d2e8f5",contentWidth:Ti.UI.FILL,height:"100%",width:"100%"});L.add(U)}null!=o&&""!=o&&(n.hide(),e.remove(o),e.setTouchEnabled(!0)),P.add(L)}else{var y=require("/builders/createApplicationWindow"),P=y(t,null,"No Search Results","#d2e8f5",null,null,null,null),F=Titanium.UI.createLabel({text:"Please fill out one or more of the form fields",color:"#999",font:{fontFamily:"Arial",fontSize:18}});0==A&&F.setText("Your search returned no results, please try again with a different search term."),P.add(F),null!=o&&""!=o&&(n.hide(),e.remove(o),e.setTouchEnabled(!0))}return P}module.exports=createResultsPage;