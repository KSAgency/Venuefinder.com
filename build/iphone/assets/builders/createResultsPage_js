function createResultsPage(e,t,i,a,n,o,r,l,d,s,u,c,f,m){function g(){var t=require("/builders/startActInd"),i=t(F);null!=e&&e.setTouchEnabled(!1),p+=v,I+=1,T(),"iPad"!=Ti.App.Properties.getString("osname")?L.setData(A):(L.removeAllChildren(),L.add(A));{var a=require("/builders/endActInd");a(F,i[0],i[1])}null!=e&&e.setTouchEnabled(!0)}function h(){var t=require("/builders/startActInd"),i=t(F);null!=e&&e.setTouchEnabled(!1),p-=v,I-=1,T(),"iPad"!=Ti.App.Properties.getString("osname")?L.setData(A):(L.removeAllChildren(),L.add(A));{var a=require("/builders/endActInd");a(F,i[0],i[1])}null!=e&&e.setTouchEnabled(!0)}function T(){A=[];for(var e=require("/builders/databaseFunctions/createDatabase"),a=e("/venuefinder.db","venuefinder"),n=a.execute(i+S+"ORDER BY PackageOrder ASC, VenueSort ASC LIMIT "+v+" OFFSET "+p);n.isValidRow();)!function(){var e=n.fieldByName("VenueID"),i=n.fieldByName("PackageCode"),o=n.fieldByName("VenueName"),r=n.fieldByName("Town"),m=n.fieldByName("Country");if(0!=r.length&&null!=r)var r=r+", ";else var r="";var g=(n.fieldByName("MeetingRoomDisabledAccess"),n.fieldByName("BedroomsNo")),h=n.fieldByName("BedroomDisabledAccess"),T=n.fieldByName("PackageCode");if(1==l){var p=n.fieldByName("summaryText"),I=(n.fieldByName("bodyText"),n.fieldByName("validFromDate"));validForm=I.toString(),I=I.substr(0,10),I=I.split("-");var v=I[0].toString(),b=I[1].toString()-1,w=I[2].toString();I=new Date(v,b,w),I=I.toString(),I=I.substr(0,15);var S=n.fieldByName("validToDate");S=S.toString(),S=S.substr(0,10),S=S.split("-");var E=S[0].toString(),U=S[1].toString()-1,y=S[2].toString();S=new Date(E,U,y),S=S.toString(),S=S.substr(0,15)}var L=null;if("PRE"==T){var P=a.execute('SELECT Text FROM VenueAdvertOptionsForWeb WHERE VenueID="'+e+'" AND OptionCode="SG2"');P.isValidRow()&&(L=P.fieldByName("Text"))}else{var P=a.execute('SELECT DescriptionText FROM VenueTextForWeb WHERE VenueID="'+e+'"');P.isValidRow()&&(L=P.fieldByName("DescriptionText"))}(null==L||""==L)&&(L="No description could be retrieved for this venue."),L.toString(),L=L.replace(/(<([^>]+)>)/gi,""),L=L.replace(/\s+/g," "),L=L.replace(/(&amp;)/g,"&"),L=L.replace(/(&nbsp;)/g," "),L=L.replace(/(&rsquo;)/g,"’"),L=L.replace(/(&hellip;)/g,"…"),L=L.replace(/(&oslash;)/g,"Ø"),L=L.replace(/(&pound;)/g,"£"),L=L.replace(/(&ndash;)/g,"–"),L=L.replace(/(&sup2;)/g,"²"),L=L.replace(/(&ldquo;)/g,"“"),L=L.replace(/(&rdquo;)/g,"”"),L=L.replace(/(&lsquo;)/g,"’");var N=a.execute('SELECT * FROM VenueAdvertOptionsForWeb WHERE VenueID="'+e+'" AND (OptionCode="TOP" OR OptionCode="PIC")');if(N.isValidRow())var V=N.fieldByName("GraphicFileName");if("FRE"==i)var k="freeResultsFormat";else var k="featuredResultsFormat";var C=[];if(1==l?(k="offersResultsFormat",C[0]=o,C[1]=e,C[2]=V,C[3]=r,C[4]=m,C[5]=p,C[6]=I,C[7]=S,C[8]=null):(C=[],C[0]=o,C[1]=e,C[2]=V,C[3]=g,C[4]=h,C[5]=L,C[6]=r,C[7]=m,C[8]=null==f?null:f),"FRE"==i){var R=require("/builders/"+k),O=R(o,e,r,m);A.push(O)}else{var R=require("/builders/"+k),O=R(C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],C[8]);A.push(O)}n.next(),O.addEventListener("click",function(e){var i=require("/builders/startActInd"),a=i(F);if("iPad"!=Ti.App.Properties.getString("osname"))var n=e.rowData;else var n=e.source;var o=null;"offersResultsFormat"==k?o="Offers":"Videos"==d&&(o="Media"),null==s?s=n.uniqueID:null!=s&&null==u?u=n.uniqueID:null!=s&&null!=u&&null==c&&(c=n.uniqueID);{var r=require("/builders/createApplicationWindow"),l=(r(t,"children/featuredListing",n.venueTitle,"#FFF",d,s,u,c,n.uniqueID,o),require("/builders/endActInd"));l(F,a[0],a[1])}})}();if("iPad"==Ti.App.Properties.getString("osname"))var o=Titanium.UI.createView({height:"60",width:"1000",left:"10",top:"10"}),r=Titanium.UI.createButton({title:"Next Page",color:"#999",borderRadius:10,borderColor:"#999",backgroundColor:"#FFF",height:50,width:327,right:0,top:0}),m=Titanium.UI.createButton({title:"Go Back",color:"#999",borderRadius:10,borderColor:"#999",backgroundColor:"#FFF",height:50,width:327,left:0,top:0});else{var o=Titanium.UI.createTableViewRow({height:70}),r=Titanium.UI.createButton({title:"Next Page",color:"#999",height:40,width:140,right:10}),m=Titanium.UI.createButton({title:"Go Back",color:"#999",height:40,width:140,left:10});"Android"==Ti.App.Properties.getString("osname")&&(r.setColor("#333"),m.setColor("#333"))}0!=I&&o.add(m),p+A.length<U&&o.add(r),A.push(o),r.addEventListener("click",function(){g(o)}),m.addEventListener("click",function(){h()}),a.close()}var p=0,I=0,v=10;"iPad"==Ti.App.Properties.getString("osname")&&(v=12),null!=m&&(v=m);var b=require("/builders/databaseFunctions/createDatabase"),w=b("/venuefinder.db","venuefinder");if(0==r)var S=' AND PackageCode!="FRE" ';else var S="";var E=w.execute(i+S),U=E.rowCount;if(w.close(),1==a&&0!=U){var A=[],y=require("/builders/createApplicationWindow"),F=y(t,null,"Search Results ("+U+")","#FFF","Search","Venue Search","Search Results",null);if(Ti.API.info(F),F.addEventListener("close",function(){p=0}),T(),"iPad"!=Ti.App.Properties.getString("osname"))var L=Titanium.UI.createTableView({data:A});else{var L=Titanium.UI.createScrollView({layout:"horizontal",horizontalWrap:!0,backgroundColor:"#d2e8f5",contentWidth:Ti.UI.FILL,height:"100%",width:"100%"});L.add(A)}null!=n&&""!=n&&(o.hide(),e.remove(n),e.setTouchEnabled(!0)),F.add(L)}else{var y=require("/builders/createApplicationWindow"),F=y(t,null,"No Search Results","#d2e8f5",null,null,null,null),P=Titanium.UI.createLabel({text:"Please fill out one or more of the form fields",color:"#999",font:{fontFamily:"Arial",fontSize:18}});0==U&&P.setText("Your search returned no results, please try again with a different search term."),F.add(P),null!=n&&""!=n&&(o.hide(),e.remove(n),e.setTouchEnabled(!0))}return F}module.exports=createResultsPage;