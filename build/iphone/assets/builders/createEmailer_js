<<<<<<< HEAD
function createEmailer(e,t,i,o,a){var n=Ti.UI.createView({width:Ti.UI.FILL,height:Ti.UI.FILL,backgroundColor:"#d2e8f5"}),r=[],d=require("/builders/databaseFunctions/createDoubleField"),l=d("Send To *",""),s=d("Name",""),u=d("Organisation",""),c=d("Town/Region","");emailTel=d("Telephone",""),emailFrom=d("Your Email *",""),r.push(l[0]),r.push(s[0]),r.push(u[0]),r.push(emailTel[0]),r.push(emailFrom[0]),r.push(c[0]),null!=t&&""!=t?l[1].setValue(t):r.push(l);var f=!1,m=Titanium.UI.createTableViewRow({height:45,color:"#399ad4",tintColor:"#399ad4",backgroundColor:"#f7f7f7",hasCheck:!1,title:"Click to send me a copy",font:{fontFamily:"Arial",fontSize:14,fontWeight:"bold"},color:"#399ad4"});m.addEventListener("click",function(){0==f?(f=!0,m.setHasCheck(!0)):(f=!1,m.setHasCheck(!1))}),r.push(m);var T=Titanium.UI.createTableViewRow({height:90,color:"#399ad4",backgroundColor:"#f7f7f7"}),h=Titanium.UI.createTextArea({color:"#399ad4",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:14,fontWeight:"bold"},width:Ti.UI.SIZE,left:0,height:Ti.UI.FILL,value:"Your Message",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_NONE});"Android"==Ti.App.Properties.getString("osname")?h.setSoftKeyboardOnFocus(Ti.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS):h.setLeft(10),h.addEventListener("focus",function(){setTimeout(function(){h.focus()},500)}),T.add(h),r.push(T),h.addEventListener("focus",function(){"Your Message"==h.value&&h.setValue("")}),h.addEventListener("blur",function(){""==h.value&&h.setValue("Your Message")});var p=require("/builders/submitButtonStyle"),g=p();g.addEventListener("click",function(){var e=l[1].getValue(),n=s[1].getValue(),r=u[1].getValue(),d=emailTel[1].getValue(),m=emailFrom[1].getValue(),T=c[1].getValue(),p=h.getValue();""!=i&&null!=i&&(p=p+"</br></br>"+i+'</br></br>This venue was shared with you via the <a href="http://www.venuefinder.com/app">Venuefinder.com App</a>'),"shareAll"==o&&(a=e);var g={EmailTo:e,Name:n,Organisation:r,Telephone:d,EmailFrom:m,Location:T,EmailBody:p,CCSender:f};g=JSON.stringify(g),alert(g.toString());var b=Ti.Network.createHTTPClient();b.open("POST","http://venuefindermobile.live.x-rm.com/webapi-v1/api/mail/SendVenueRecommendation"),b.setRequestHeader("Content-Type","application/json; charset=UTF-8"),b.onload=function(){var i=Titanium.UI.createAlertDialog({title:"Email sent",message:"Your email has been successfully sent to "+a});(null==t||""==t)&&i.setMessage("Your email has been successfully sent to "+e),i.show()},b.onerror=function(){var e=Titanium.UI.createAlertDialog({title:"Message Not Sent",message:"Please check required fields are filled out and you are connected to the internet"});e.show()},b.send(g)});var b=Titanium.UI.createView({width:Ti.UI.FILL,height:60}),I=Titanium.UI.createLabel({text:"The fields marked with an asterisk must be filled out in order to send your email.",color:"#666",textAlign:"center",font:{fontFamily:"Arial",fontSize:14},left:10});b.add(I);var v=Titanium.UI.createTableView({style:Titanium.UI.iPhone.TableViewStyle.GROUPED,data:r,backgroundColor:"#d2e8f5",headerView:b,footerView:g,top:0,height:"89.5%",width:300});return"iPad"==Ti.App.Properties.getString("osname")&&v.setWidth(600),n.add(v),n}module.exports=createEmailer;
=======
function createEmailer(e,t,i,o,a){var n=Ti.UI.createView({width:Ti.UI.FILL,height:Ti.UI.FILL,backgroundColor:"#d2e8f5"}),r=[],d=require("/builders/databaseFunctions/createDoubleField"),l=d("Send To *",""),s=d("Name",""),u=d("Organisation",""),c=d("Town/Region","");emailTel=d("Telephone",""),emailFrom=d("Your Email *",""),r.push(l[0]),r.push(s[0]),r.push(u[0]),r.push(emailTel[0]),r.push(emailFrom[0]),r.push(c[0]),null!=t&&""!=t?l[1].setValue(t):r.push(l);var f=!1,m=Titanium.UI.createTableViewRow({height:45,color:"#399ad4",tintColor:"#399ad4",backgroundColor:"#f7f7f7",hasCheck:!1,title:"Click to send me a copy",font:{fontFamily:"Arial",fontSize:14,fontWeight:"bold"},color:"#399ad4"});m.addEventListener("click",function(){0==f?(f=!0,m.setHasCheck(!0)):(f=!1,m.setHasCheck(!1))}),r.push(m);var h=Titanium.UI.createTableViewRow({height:90,color:"#399ad4",backgroundColor:"#f7f7f7"}),T=Titanium.UI.createTextArea({color:"#399ad4",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:14,fontWeight:"bold"},width:Ti.UI.SIZE,left:0,height:Ti.UI.FILL,value:"Your Message",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_NONE});"Android"==Ti.App.Properties.getString("osname")?T.setSoftKeyboardOnFocus(Ti.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS):T.setLeft(10),T.addEventListener("focus",function(){setTimeout(function(){T.focus()},500)}),h.add(T),r.push(h),T.addEventListener("focus",function(){"Your Message"==T.value&&T.setValue("")}),T.addEventListener("blur",function(){""==T.value&&T.setValue("Your Message")});var g=require("/builders/submitButtonStyle"),p=g();p.addEventListener("click",function(){var e=l[1].getValue(),n=s[1].getValue(),r=u[1].getValue(),d=emailTel[1].getValue(),m=emailFrom[1].getValue(),h=c[1].getValue(),g=T.getValue();""!=i&&null!=i&&(g=g+"</br></br>"+i+'</br></br>This venue was shared with you via the <a href="http://www.venuefinder.com/app">Venuefinder.com App</a>'),"shareAll"==o&&(a=e);var p={EmailTo:e,Name:n,Organisation:r,Telephone:d,EmailFrom:m,Location:h,EmailBody:g,CCSender:f};p=JSON.stringify(p),alert(p.toString());var b=Ti.Network.createHTTPClient();b.open("POST","http://venuefindermobile.live.x-rm.com/webapi-v1/api/mail/SendVenueRecommendation"),b.setRequestHeader("Content-Type","application/json; charset=UTF-8"),b.onload=function(){var i=Titanium.UI.createAlertDialog({title:"Email sent",message:"Your email has been successfully sent to "+a});(null==t||""==t)&&i.setMessage("Your email has been successfully sent to "+e),i.show()},b.onerror=function(){var e=Titanium.UI.createAlertDialog({title:"Message Not Sent",message:"Please check required fields are filled out and you are connected to the internet"});e.show()},b.send(p)});var b=Titanium.UI.createView({width:Ti.UI.FILL,height:60}),I=Titanium.UI.createLabel({text:"The fields marked with an asterisk must be filled out in order to send your email.",color:"#666",textAlign:"center",font:{fontFamily:"Arial",fontSize:14},left:10});b.add(I);var v=Titanium.UI.createTableView({style:Titanium.UI.iPhone.TableViewStyle.GROUPED,data:r,backgroundColor:"#d2e8f5",headerView:b,footerView:p,top:0,height:"89.5%",width:300});"iPad"==Ti.App.Properties.getString("osname")&&v.setWidth(600),n.add(v);var w=require("/builders/createAdvert"),S=w();return n.add(S),n}module.exports=createEmailer;
>>>>>>> FETCH_HEAD
