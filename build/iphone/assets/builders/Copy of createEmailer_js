function createEmailer(e,t,i,o,a){var n=Ti.UI.createView({width:Ti.UI.FILL,height:Ti.UI.FILL,backgroundColor:"#d2e8f5"}),r=[],d=Titanium.UI.createTableViewRow({height:45,color:"#399ad4",backgroundColor:"#f7f7f7"}),u=Titanium.UI.createTextField({color:"#399ad4",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:14},width:Ti.UI.SIZE,left:0,hintText:"Send To*",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_NONE});d.add(u),"Android"==Ti.App.Properties.getString("osname")?u.setSoftKeyboardOnFocus(Ti.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS):u.setLeft(15),u.addEventListener("focus",function(){setTimeout(function(){u.focus()},500)}),null!=t&&""!=t?u.setValue(t):r.push(d);var l=Titanium.UI.createTableViewRow({height:45,color:"#399ad4",backgroundColor:"#f7f7f7"}),s=Titanium.UI.createTextField({color:"#399ad4",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:14},width:Ti.UI.SIZE,left:0,hintText:"Name",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_NONE});"Android"==Ti.App.Properties.getString("osname")?s.setSoftKeyboardOnFocus(Ti.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS):s.setLeft(15),s.addEventListener("focus",function(){setTimeout(function(){s.focus()},500)}),l.add(s),r.push(l);var f=Titanium.UI.createTableViewRow({height:45,color:"#399ad4",backgroundColor:"#f7f7f7"}),c=Titanium.UI.createTextField({color:"#399ad4",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:14},width:Ti.UI.SIZE,left:0,hintText:"Organisation",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_NONE});"Android"==Ti.App.Properties.getString("osname")?c.setSoftKeyboardOnFocus(Ti.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS):c.setLeft(15),c.addEventListener("focus",function(){setTimeout(function(){c.focus()},500)}),f.add(c),r.push(f);var T=Titanium.UI.createTableViewRow({height:45,color:"#399ad4",backgroundColor:"#f7f7f7"}),m=Titanium.UI.createTextField({color:"#399ad4",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:14},width:Ti.UI.SIZE,left:0,hintText:"Telephone",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_NONE});"Android"==Ti.App.Properties.getString("osname")?m.setSoftKeyboardOnFocus(Ti.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS):m.setLeft(15),m.addEventListener("focus",function(){setTimeout(function(){m.focus()},500)}),T.add(m),r.push(T);var h=Titanium.UI.createTableViewRow({height:45,color:"#399ad4",backgroundColor:"#f7f7f7"}),S=Titanium.UI.createTextField({color:"#399ad4",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:14},width:Ti.UI.SIZE,left:0,hintText:"Your Email*",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_NONE});"Android"==Ti.App.Properties.getString("osname")?S.setSoftKeyboardOnFocus(Ti.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS):S.setLeft(15),S.addEventListener("focus",function(){setTimeout(function(){S.focus()},500)}),h.add(S),r.push(h);var b=!1,g=Titanium.UI.createTableViewRow({height:45,color:"#399ad4",tintColor:"#399ad4",backgroundColor:"#f7f7f7",hasCheck:!1,title:"Click to send me a copy",font:{fontFamily:"Arial",fontSize:14},color:"#399ad4"});g.addEventListener("click",function(){0==b?(b=!0,g.setHasCheck(!0)):(b=!1,g.setHasCheck(!1))}),r.push(g);var I=Titanium.UI.createTableViewRow({height:45,color:"#399ad4",backgroundColor:"#f7f7f7"}),p=Titanium.UI.createTextField({color:"#399ad4",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:14},width:Ti.UI.SIZE,left:0,hintText:"Location (Town/Region)",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_NONE});"Android"==Ti.App.Properties.getString("osname")?p.setSoftKeyboardOnFocus(Ti.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS):p.setLeft(15),p.addEventListener("focus",function(){setTimeout(function(){p.focus()},500)}),I.add(p),r.push(I);var U=Titanium.UI.createTableViewRow({height:90,color:"#399ad4",backgroundColor:"#f7f7f7"}),O=Titanium.UI.createTextArea({color:"#399ad4",backgroundColor:"#f7f7f7",font:{fontFamily:"Arial",fontSize:14},width:Ti.UI.SIZE,left:0,height:Ti.UI.FILL,value:"Your Message",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_NONE});"Android"==Ti.App.Properties.getString("osname")?O.setSoftKeyboardOnFocus(Ti.UI.Android.SOFT_KEYBOARD_SHOW_ON_FOCUS):O.setLeft(15),O.addEventListener("focus",function(){setTimeout(function(){O.focus()},500)}),U.add(O),r.push(U),O.addEventListener("focus",function(){"Your Message"==O.value&&O.setValue("")}),O.addEventListener("blur",function(){""==O.value&&O.setValue("Your Message")});var E=require("/builders/submitButtonStyle"),A=E();A.addEventListener("click",function(){var r=u.getValue(),d=s.getValue(),l=c.getValue(),f=m.getValue(),T=S.getValue(),h=p.getValue(),g=O.getValue();""!=i&&null!=i&&(g=g+"</br></br>"+i+'</br></br>This venue was shared with you via the <a href="http://www.venuefinder.com/app">Venuefinder.com App</a>'),"shareAll"==o&&(a=r);var I={EmailTo:r,Name:d,Organisation:l,Telephone:f,EmailFrom:T,Location:h,EmailBody:g,CCSender:b};I=JSON.stringify(I);var U=Ti.Network.createHTTPClient();U.open("POST","http://venuefindermobile.live.x-rm.com/webapi-v1/api/mail/SendVenueRecommendation"),U.setRequestHeader("Content-Type","application/json; charset=UTF-8"),U.onload=function(){var i=Titanium.UI.createAlertDialog({title:"Email sent",message:"Your email has been successfully sent to "+a});(null==t||""==t)&&i.setMessage("Your email has been successfully sent to "+r),i.show(),e.activeTab.close(n)},U.onerror=function(){var e=Titanium.UI.createAlertDialog({title:"Message Not Sent",message:"Please check required fields are filled out and you are connected to the internet"});e.show()},U.send(I)});var v=Titanium.UI.createView({width:Ti.UI.FILL,height:60}),w=Titanium.UI.createLabel({text:"The fields marked with an asterisk must be filled out in order to send your email.",color:"#666",textAlign:"center",font:{fontFamily:"Arial",fontSize:14},left:10});v.add(w);var F=Titanium.UI.createTableView({style:Titanium.UI.iPhone.TableViewStyle.GROUPED,data:r,backgroundColor:"#d2e8f5",headerView:v,footerView:A,top:0,height:"89.5%",width:300});"iPad"==Ti.App.Properties.getString("osname")&&F.setWidth(600),n.add(F);var _=require("/builders/createAdvert"),L=_();return n.add(L),n}module.exports=createEmailer;